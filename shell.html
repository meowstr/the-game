<!DOCTYPE html>
<html lang="en-us"><head>
<!-- meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>THE GAME</title>
    <style>
        body {
            background-color: black;
            color: white;
        }
	.fade
	{
		animation-name: fade;
		animation-duration: 1s;
		animation-fill-mode: forwards;
	}
	#terminal-container
	{
		position: absolute;
		top: 0;
		background-color: rgb(0, 0, 0);
		width: 100%;
		height: 100%;

	}
        #canvas-container {
            width: 800px;
            height: 600px;
            margin: 0px auto;
        }
	@keyframes fade
	{
		from
		{
			opacity: 1.0;
		}

		to
		{
			opacity: 0.0;
		}
	}
    </style>
  </head>
  <body style="margin: 0;">

	  <div id="terminal-container">
		  <h1 id="term-text">[pogchamp@archlinux ~] $ </h1>
	  </div>

    <h1 style="text-align: center">IN PROGRESS</h1>

    <div id="canvas-container">
      <canvas class="emscripten" id="canvas" width="800" height="600" oncontextmenu="event.preventDefault()" tabindex="-1"></canvas>
    </div>

    <script type="text/javascript">
      var Module = {
        print: (function() {
          return function(text) {
            if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
            console.log(text);
          };
        })(),

        canvas: (() => {
          var canvas = document.getElementById('canvas');

          return canvas;
        })(),
      };

      /* Buffered, won't work.

	let command = "./breakout";
	for(let i = 0 ; i < command.length ; i++)
	{
		setTimeout(() => 
			{
				document.getElementById("term-text").innerHTML += command[i];
			}, 50)
	}

      */

	let command = "./breakout";
	let i = 0;
      	function type()
      	{
		if(i < command.length)
		{
	    		document.getElementById("term-text").innerHTML += command[i];
		}
	    	i++;
	    	setTimeout(type, ((Math.random() % 51) + 50));
      	}

	function addFade()
	{
	    document.getElementById("terminal-container").classList.add("fade");
		setTimeout(() => {document.getElementById("terminal-container").remove();}, 1000);
	}
      	type();
      	setTimeout(addFade, 1000);
    </script>
    {{{ SCRIPT }}}

</body></html>
