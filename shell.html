<!DOCTYPE html>
<html lang="en-us"><head>
<!-- meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>THE GAME</title>
    <style>
	@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Silkscreen:wght@400;700&display=swap');
        body {
            background-color: black;
            color: white;
        }
	.fade
	{
		animation-name: flicker;
		animation-duration: 0.35s;
		animation-fill-mode: forwards;
	}
	#terminal-container
	{
		font-family: "IBM Plex Mono", monospace;
		position: absolute;
		top: 0;
		background-color: rgb(0, 0, 0);
		width: 100%;
		height: 100%;

	}
	#ip
	{
		font-family: "silkscreen", sans-serif;
	}
        #canvas-container {
            width: 800px;
            height: 600px;
            margin: 0px auto;
        }
	@keyframes flicker
	{
		0%
		{
			opacity: 0.0;
		}

		20%
		{
			opacity: 1.0;
		}

		40%
		{
			opacity: 1.0;
		}

		60%
		{
			opacity: 1.0;
		}

		80%
		{
			opacity: 0.0;
		}

		100%
		{
			opacoty: 1.0;
		}
	}
	@keyframes fade
	{
		from
		{
			opacity: 1.0;
		}

		to
		{
			opacoty: 0.0;
		}
	}
    </style>
  </head>
  <body style="margin: 0;">

	  <div id="terminal-container">
		  <h1 id="term-text">[pogchamp@archlinux ~] $ </h1>
	  </div>

    <h1 id="ip" style="text-align: center">IN PROGRESS</h1>

    <div id="canvas-container">
      <canvas class="emscripten" id="canvas" width="800" height="600" oncontextmenu="event.preventDefault()" tabindex="-1"></canvas>
    </div>

    <script type="text/javascript">
      var Module = {
        print: (function() {
          return function(text) {
            if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
            console.log(text);
          };
        })(),

        canvas: (() => {
          var canvas = document.getElementById('canvas');

          return canvas;
        })(),
      };

	let command = "./breakout";
	let i = 0;
      	function type()
      	{
		if(i < command.length)
		{
	    		document.getElementById("term-text").innerHTML += command[i];
		}
	    	i++;
	    	setTimeout(type, ((Math.random() % 51) + 50));
      	}

	function addFade()
	{
		// No I won't make a variable :3c
	    	document.getElementById("terminal-container").classList.add("fade");
		document.getElementById("terminal-container").addEventListener("animationend", () => {document.getElementById("terminal-container").remove();});
	}

      	type();
      	setTimeout(addFade, 1000);
    </script>
    {{{ SCRIPT }}}

</body></html>
